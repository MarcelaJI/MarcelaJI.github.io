---
layout: default
title: Pentesting Basics
---

# Enumeraci√≥n del servicio SMB

**SMB**¬†significa¬†**Server Message Block**, es un¬†**protocolo**¬†de comunicaci√≥n de red utilizado para compartir archivos, impresoras y otros recursos entre dispositivos de red. Es un protocolo propietario de¬†**Microsoft**¬†que se utiliza en sistemas operativos¬†**Windows**.

**Samba**, por otro lado, es una implementaci√≥n libre y de c√≥digo abierto del¬†**protocolo SMB**, que se utiliza principalmente en sistemas operativos basados en¬†**Unix**¬†y¬†**Linux**. Samba proporciona una manera de compartir archivos y recursos entre dispositivos de red que ejecutan sistemas operativos diferentes, como Windows y Linux.

Aunque SMB y Samba comparten una funcionalidad similar, existen algunas diferencias notables. SMB es un protocolo propietario de Microsoft, mientras que Samba es un proyecto de software libre y de c√≥digo abierto. Adem√°s, SMB es una implementaci√≥n m√°s completa y compleja del protocolo, mientras que Samba es una implementaci√≥n m√°s ligera y limitada.

---

Una de las herramientas para la fase de reconocimiento es *smbmap*. Smbmap es una herramienta de l√≠nea de comandos utilizada para enumerar recursos compartidos y permisos en un servidor SMB (Server Message Block) o Samba. Es una herramienta muy √∫til para la enumeraci√≥n de redes y para la identificaci√≥n de posibles vulnerabilidades de seguridad.

Con smbmap, puedes enumerar los recursos compartidos en un servidor SMB y obtener informaci√≥n detallada sobre cada recurso, como los permisos de acceso, los usuarios y grupos autorizados, y los archivos y carpetas compartidos. Tambi√©n puedes utilizar smbmap para identificar recursos compartidos que no requieren autenticaci√≥n, lo que puede ser un problema de seguridad.

A continuaci√≥n, se proporciona una breve descripci√≥n de algunos de los par√°metros comunes de smbmap:

-H: Este par√°metro se utiliza para especificar la direcci√≥n IP o el nombre de host del servidor SMB al que se quiere conectarse.
 -P: Este par√°metro se utiliza para especificar el puerto TCP utilizado para la conexi√≥n SMB. El puerto predeterminado para SMB es el 445, pero si el servidor SMB est√° configurado para utilizar un puerto diferente, este par√°metro debe ser utilizado para especificar el puerto correcto.
-u: Este par√°metro se utiliza para especificar el nombre de usuario para la conexi√≥n SMB.
-p: Este par√°metro se utiliza para especificar la contrase√±a para la conexi√≥n SMB.
-d: Este par√°metro se utiliza para especificar el dominio al que pertenece el usuario que se est√° utilizando para la conexi√≥n SMB.
-s: Este par√°metro se utiliza para especificar el recurso compartido espec√≠fico que se quiere enumerar. Si no se especifica, smbmap intentar√° enumerar todos los recursos compartidos en el servidor SMB.

Un ejemplo:

```
smbmap -H 127.0.0.1
```

---

Asimismo, otra de las herramientas  es ‚Äòsmbclient‚Äò. Smbclient es otra herramienta de l√≠nea de comandos utilizada para interactuar con servidores SMB y Samba, pero a diferencia de smbmap que se utiliza principalmente para enumeraci√≥n, smbclient proporciona una interfaz de l√≠nea de comandos para interactuar con los recursos compartidos SMB y Samba, lo que permite la descarga y subida de archivos, la ejecuci√≥n de comandos remotos, la navegaci√≥n por el sistema de archivos remoto, entre otras funcionalidades.

En cuanto a los par√°metros m√°s comunes de smbclient, algunos de ellos son:

-L: Este par√°metro se utiliza para enumerar los recursos compartidos disponibles en el servidor SMB o Samba.
-U: Este par√°metro se utiliza para especificar el nombre de usuario y la contrase√±a utilizados para la autenticaci√≥n con el servidor SMB o Samba.
-c: Este par√°metro se utiliza para especificar un comando que se ejecutar√° en el servidor SMB o Samba.

Un ejemplo para podernos conectar por **smbclient** es:

```
smbclient //127.0.0.1/myshare -N
```


El par√°metro -N es para entrar con una null sesion ya que no contamos con credenciales v√°lidas para acceder.

El recurso **myshare** es el que hemos descubierto en la enumeraci√≥n con **smbmap**.

---

- Para subir un archivo a smb ejecutamos:

```
put <nombre del archivo>
```

- Para llevarnos un archivo a nuestro equipo ejecutamos:

```
get <nommbre del archivo>
```

- Para listar archivos en smb ejecutamos:

```
ls o dir
```

---

<div style="text-align:center; font-size: 0.9em; margint-top: 40px; color: #33ff33;">
    üíª Hecho con üíö por <strong>Marcela</strong> - 2025
</div>